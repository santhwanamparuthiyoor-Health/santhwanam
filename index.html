<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Santhwanam – Health Monitor</title>
<style>
:root{--bg:#EEF5FF;--primary:#0A2540;--accent:#8B2CF5;--border:#DDE7F3;}
body{margin:0;font-family:Segoe UI, sans-serif;background:var(--bg);}
body::before{content:"";position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);
width:900px;height:900px;background:url("logo.png") no-repeat center;background-size:contain;
opacity:0.06;z-index:-1;}
#loginBox{height:100vh;display:flex;justify-content:center;align-items:center;}
.login-card{background:white;padding:40px;width:360px;border-radius:20px;box-shadow:0 25px 50px rgba(0,0,0,0.15);text-align:center;}
.login-card h2{margin-bottom:20px;color:var(--primary);}
.login-card input{width:100%;padding:12px;margin-bottom:15px;border-radius:10px;border:1px solid #ccc;}
.login-card button{width:100%;padding:12px;background:var(--accent);color:white;border:none;border-radius:10px;font-size:16px;cursor:pointer;}
#error{color:red;margin-top:10px;}
#app{display:none;}
.container{max-width:1200px;margin:30px auto;background:#fff;border-radius:20px;padding:30px;box-shadow:0 25px 50px rgba(0,0,0,0.08);}
.header{display:flex;align-items:center;gap:20px;margin-bottom:25px;}
.header img{height:80px;}
.header h1{margin:0;color:var(--primary);}
.form-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:16px;}
.form-group{display:flex;flex-direction:column;}
label{font-size:14px;margin-bottom:6px;color:var(--primary);}
input,select,textarea{padding:11px;border-radius:12px;border:1px solid var(--border);font-size:14px;}
textarea{resize:none;}
.save-btn{margin-top:25px;width:100%;padding:15px;font-size:16px;border:none;border-radius:14px;background:linear-gradient(135deg,#8B2CF5,#A855F7);color:#fff;cursor:pointer;}
.table-wrap{overflow-x:auto;margin-top:35px;}
table{width:100%;border-collapse:collapse;min-width:1200px;}
th,td{padding:12px;border-bottom:1px solid var(--border);text-align:center;font-size:14px;}
th{background:var(--bg);color:var(--primary);}
</style>
</head>
<body>

<!-- LOGIN -->
<div id="loginBox">
  <div class="login-card">
    <h2>Santhwanam Login</h2>
    <input id="loginUser" placeholder="Username">
    <input id="loginPass" type="password" placeholder="Password">
    <button onclick="login()">Login</button>
    <div id="error"></div>
  </div>
</div>

<!-- MAIN APP -->
<div id="app">
  <div class="container">
    <div class="header">
      <img src="logo.png">
      <h1>Santhwanam – Health Monitor</h1>
    </div>
    <div class="form-grid">
      <div class="form-group"><label>Date</label><input id="date" type="date"></div>
      <div class="form-group"><label>Unit No</label><input id="unit"></div>
      <div class="form-group"><label>Name</label><input id="name"></div>
      <div class="form-group"><label>Age</label><input id="age"></div>
      <div class="form-group">
        <label>Gender</label>
        <select id="gender">
          <option value="">Select</option>
          <option>Male</option><option>Female</option>
        </select>
      </div>
      <div class="form-group"><label>Blood Pressure</label><input id="bp"></div>
      <div class="form-group"><label>Sugar</label><input id="sugar"></div>
      <div class="form-group"><label>Height (cm)</label><input id="height"></div>
      <div class="form-group"><label>Weight (kg)</label><input id="weight"></div>
      <div class="form-group">
        <label>Blood Group</label>
        <select id="blood">
          <option value="">Select</option>
          <option>A+</option><option>A-</option>
          <option>B+</option><option>B-</option>
          <option>AB+</option><option>AB-</option>
          <option>O+</option><option>O-</option>
        </select>
      </div>
      <div class="form-group"><label>Phone</label><input id="phone"></div>
      <div class="form-group"><label>Address</label><textarea id="address"></textarea></div>
      <div class="form-group"><label>Other Disease</label><textarea id="disease"></textarea></div>
      <div class="form-group"><label>Medicine Intake</label><textarea id="medicine"></textarea></div>
    </div>
    <button class="save-btn" onclick="saveData()">Save Health Data</button>
    <div class="table-wrap">
      <table>
        <thead>
          <tr>
            <th>Date</th><th>Unit</th><th>Name</th><th>Age</th><th>Gender</th>
            <th>BP</th><th>Sugar</th><th>Height</th><th>Weight</th><th>Blood</th>
            <th>Phone</th><th>Address</th><th>Disease</th><th>Medicine</th>
          </tr>
        </thead>
        <tbody id="tableBody"></tbody>
      </table>
    </div>
  </div>
</div>

<script>
function login(){
  const loginUser = document.getElementById('loginUser');
  const loginPass = document.getElementById('loginPass');
  const loginBox = document.getElementById('loginBox');
  const app = document.getElementById('app');
  const error = document.getElementById('error');

  if(loginUser.value==="santhwanam" && loginPass.value==="care123"){
    loginBox.style.display="none";
    app.style.display="block";
    fetchSheetData();
  } else {
    error.innerText="Invalid username or password";
  }
}

const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbxWxk8doJi8gY_cY8hkL0RXR7XdyheIlOdEShDAKu7LbFBIO0SEodRpvTDU2xQ-3QOe/exec";

function saveData() {
  const data = {
    date: document.getElementById('date').value,
    unit: document.getElementById('unit').value,
    name: document.getElementById('name').value,
    age: document.getElementById('age').value,
    gender: document.getElementById('gender').value,
    bp: document.getElementById('bp').value,
    sugar: document.getElementById('sugar').value,
    height: document.getElementById('height').value,
    weight: document.getElementById('weight').value,
    blood: document.getElementById('blood').value,
    phone: document.getElementById('phone').value,
    address: document.getElementById('address').value,
    disease: document.getElementById('disease').value,
    medicine: document.getElementById('medicine').value
  };

  fetch(WEB_APP_URL, {
    method:"POST",
    body: JSON.stringify(data)
  })
  .then(response => response.json())
  .then(res => {
    if(res.status==="success"){
      addRowToTable(data);
      document.querySelectorAll("input, select, textarea").forEach(e=>e.value="");
      alert("Health data saved to spreadsheet!");
    } else {
      alert("Error saving data: "+res.message);
    }
  })
  .catch(err=>alert("Error connecting to spreadsheet: "+err));
}

function fetchSheetData() {
  fetch(WEB_APP_URL)
    .then(response=>response.json())
    .then(data=>{
      if(data && data.length) data.forEach(row=>addRowToTable(row));
    })
    .catch(err=>console.error("Error fetching spreadsheet data: ", err));
}

function addRowToTable(data){
  const t
