<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Santhwanam – Health Monitor</title>

<style>
:root{
  --bg:#EEF5FF;
  --primary:#0A2540;
  --accent:#8B2CF5;
  --border:#DDE7F3;
}

body{
  margin:0;
  font-family:Segoe UI, sans-serif;
  background:var(--bg);
}

body::before{
  content:"";
  position:fixed;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  width:900px;
  height:900px;
  background:url("logo.png") no-repeat center;
  background-size:contain;
  opacity:0.06;
  z-index:-1;
}

#loginBox{
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
}

.login-card{
  background:white;
  padding:40px;
  width:360px;
  border-radius:20px;
  box-shadow:0 25px 50px rgba(0,0,0,0.15);
  text-align:center;
}

.login-card input{
  width:100%;
  padding:12px;
  margin-bottom:15px;
  border-radius:10px;
  border:1px solid #ccc;
}

.login-card button{
  width:100%;
  padding:12px;
  background:#8B2CF5;
  color:white;
  border:none;
  border-radius:10px;
  font-size:16px;
  cursor:pointer;
}

#error{color:red;}

#app{display:none;}

.container{
  max-width:1200px;
  margin:30px auto;
  background:#fff;
  border-radius:20px;
  padding:30px;
}

.form-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
  gap:16px;
}

input,select,textarea{
  padding:11px;
  border-radius:12px;
  border:1px solid var(--border);
}

.save-btn{
  margin-top:25px;
  width:100%;
  padding:15px;
  background:#8B2CF5;
  color:#fff;
  border:none;
  border-radius:14px;
  cursor:pointer;
}
</style>
</head>

<body>

<div id="loginBox">
  <div class="login-card">
    <h2>Santhwanam Login</h2>
    <input id="loginUser" placeholder="Username">
    <input id="loginPass" type="password" placeholder="Password">
    <button onclick="login()">Login</button>
    <div id="error"></div>
  </div>
</div>

<div id="app">
  <div class="container">

    <div class="form-grid">
      <input id="date" type="date">
      <input id="unit" placeholder="Unit No">
      <input id="name" placeholder="Name">
      <input id="age" placeholder="Age">
      <select id="gender"><option>Male</option><option>Female</option></select>
      <input id="bp" placeholder="Blood Pressure">
      <input id="sugar" placeholder="Sugar">
      <input id="height" placeholder="Height">
      <input id="weight" placeholder="Weight">
      <input id="blood" placeholder="Blood Group">
      <input id="phone" placeholder="Phone">
      <textarea id="address" placeholder="Address"></textarea>
      <textarea id="disease" placeholder="Disease"></textarea>
      <textarea id="medicine" placeholder="Medicine"></textarea>
    </div>

    <button class="save-btn" onclick="saveData()">Save Health Data</button>
  </div>
</div>

<script>
function login(){
  if(loginUser.value==="santhwanam" && loginPass.value==="care123"){
    loginBox.style.display="none";
    app.style.display="block";
  }else{
    error.innerText="Invalid username or password";
  }
}

/* ✅ UPDATED WEB APP URL */
const WEB_APP_URL =
"https://script.google.com/macros/s/AKfycbypLEya6JZIdfBINeDMdH0WCwK6cEGRR5FYgzTTN0yoo8XhnjL6MIMyjkI0x0AKW68Zxg/exec";

function saveData(){
  const data={
    date:date.value,
    unit:unit.value,
    name:name.value,
    age:age.value,
    gender:gender.value,
    bp:bp.value,
    sugar:sugar.value,
    height:height.value,
    weight:weight.value,
    blood:blood.value,
    phone:phone.value,
    address:address.value,
    disease:disease.value,
    medicine:medicine.value
  };

  fetch(WEB_APP_URL,{
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body:JSON.stringify(data)
  })
  .then(res=>res.json())
  .then(r=>{
    if(r.status==="success"){
      alert("Health data saved to spreadsheet ✅");
    }else{
      alert("Error: "+r.message);
    }
  })
  .catch(()=>{
    alert("Network error – check Web App access");
  });
}
</script>

</body>
</html>
